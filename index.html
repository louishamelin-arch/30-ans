<!DOCTYPE html>
<html lang="fr">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>30 ans pour un futur durable</title>
 <style>
 * {
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 }

 body {
 font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
 background: linear-gradient(135deg, #1a2a6c, #2c3e50);
 color: white;
 min-height: 100vh;
 padding: 20px;
 }

 .container {
 max-width: 800px;
 margin: 0 auto;
 background: rgba(255, 255, 255, 0.1);
 backdrop-filter: blur(10px);
 border-radius: 20px;
 padding: 30px;
 box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
 }

 h1 {
 text-align: center;
 margin-bottom: 10px;
 font-size: 2.5em;
 }

 .subtitle {
 text-align: center;
 margin-bottom: 30px;
 opacity: 0.9;
 }

 .phase-indicator {
 text-align: center;
 margin-bottom: 20px;
 font-size: 1.2em;
 color: #4FC3F7;
 font-weight: bold;
 }

 .stats {
 display: none;
 grid-template-columns: repeat(3, 1fr);
 gap: 15px;
 margin: 20px 0;
 }

 .stats.visible {
 display: grid;
 }

 .stat {
 background: rgba(255, 255, 255, 0.2);
 padding: 15px;
 border-radius: 10px;
 text-align: center;
 position: relative;
 }

 .stat-value {
 font-size: 1.8em;
 font-weight: bold;
 }

 .co2-value { color: #FF6B6B; }
 .economy-value { color: #4ECDC4; }
 .social-value { color: #FFD166; }

 .stat-bar {
 height: 6px;
 background: rgba(255, 255, 255, 0.2);
 border-radius: 3px;
 margin-top: 8px;
 overflow: hidden;
 }

 .stat-fill {
 height: 100%;
 border-radius: 3px;
 transition: width 0.5s ease;
 }

 .co2-fill { background: linear-gradient(90deg, #4CAF50, #FFEB3B, #FF9800, #F44336); }
 .economy-fill { background: linear-gradient(90deg, #F44336, #FF9800, #FFEB3B, #4CAF50); }
 .social-fill { background: linear-gradient(90deg, #F44336, #FF9800, #FFEB3B, #4CAF50); }

 .scenario-container {
 background: rgba(255, 255, 255, 0.15);
 padding: 25px;
 border-radius: 15px;
 margin: 20px 0;
 border-left: 4px solid #4FC3F7;
 }

 .crisis-scenario {
 border-left: 4px solid #FF6B6B;
 background: rgba(255, 107, 107, 0.1);
 }

 .year-display {
 font-size: 1.3em;
 color: #4FC3F7;
 margin-bottom: 15px;
 font-weight: bold;
 }

 .crisis-year {
 color: #FF6B6B;
 }

 .question-text {
 font-size: 1.2em;
 line-height: 1.6;
 margin-bottom: 20px;
 }

 .choices {
 display: grid;
 gap: 12px;
 }

 .choice-btn {
 background: linear-gradient(135deg, #2196F3, #1976D2);
 color: white;
 border: none;
 padding: 16px 20px;
 border-radius: 12px;
 cursor: pointer;
 font-size: 1.1em;
 transition: all 0.3s ease;
 text-align: left;
 }

 .choice-btn:hover {
 transform: translateY(-3px);
 box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
 }

 .crisis-btn {
 background: linear-gradient(135deg, #FF6B6B, #C62828);
 }

 .hidden {
 display: none;
 }

 .transition-screen, .final-screen {
 text-align: center;
 padding: 40px 20px;
 }

 .transition-title, .final-title {
 font-size: 2em;
 margin-bottom: 20px;
 color: #4FC3F7;
 }

 .transition-text, .final-message {
 font-size: 1.3em;
 line-height: 1.8;
 margin-bottom: 30px;
 background: rgba(255, 255, 255, 0.1);
 padding: 20px;
 border-radius: 15px;
 }

 .restart-btn {
 background: linear-gradient(135deg, #FF9800, #F57C00);
 color: white;
 border: none;
 padding: 16px 32px;
 border-radius: 25px;
 cursor: pointer;
 font-size: 1.2em;
 transition: all 0.3s ease;
 margin-top: 20px;
 }

 .restart-btn:hover {
 transform: scale(1.05);
 }

 .progress-container {
 margin: 20px 0;
 }

 .progress-bar {
 width: 100%;
 height: 8px;
 background: rgba(255, 255, 255, 0.2);
 border-radius: 4px;
 overflow: hidden;
 }

 .progress-fill {
 height: 100%;
 background: linear-gradient(90deg, #4FC3F7, #2196F3);
 width: 0%;
 transition: width 0.5s ease;
 }

 .world-equilibre { background: linear-gradient(135deg, #1a2a6c, #2E7D32); }
 .world-transition { background: linear-gradient(135deg, #1a2a6c, #FF9800); }
 .world-tension { background: linear-gradient(135deg, #1a2a6c, #C62828); }

 .final-stats {
 display: grid;
 grid-template-columns: repeat(3, 1fr);
 gap: 15px;
 margin: 25px 0;
 }

 .final-stat {
 background: rgba(255, 255, 255, 0.15);
 padding: 20px;
 border-radius: 12px;
 text-align: center;
 }

 .final-stat-value {
 font-size: 2em;
 font-weight: bold;
 margin: 10px 0;
 }

 .co2-good { color: #4CAF50; }
 .co2-medium { color: #FF9800; }
 .co2-bad { color: #F44336; }

 .economy-good { color: #4CAF50; }
 .economy-medium { color: #FF9800; }
 .economy-bad { color: #F44336; }

 .social-good { color: #4CAF50; }
 .social-medium { color: #FF9800; }
 .social-bad { color: #F44336; }

 .analysis-section {
 text-align: left;
 margin: 25px 0;
 padding: 20px;
 background: rgba(255, 255, 255, 0.1);
 border-radius: 12px;
 }

 .analysis-title {
 color: #4FC3F7;
 margin-bottom: 15px;
 font-size: 1.4em;
 }

 .improvement-tips {
 text-align: left;
 margin: 20px 0;
 padding: 20px;
 background: rgba(255, 255, 255, 0.1);
 border-radius: 12px;
 border-left: 4px solid #FF9800;
 }

 .tips-title {
 color: #FF9800;
 margin-bottom: 15px;
 font-size: 1.3em;
 }

 .tip-item {
 margin: 10px 0;
 padding-left: 20px;
 position: relative;
 }

 .tip-item:before {
 content: "üí°";
 position: absolute;
 left: 0;
 }
 </style>
</head>
<body>
 <div class="container">
 <!-- √âcran d'introduction -->
 <div id="intro-screen">
 <h1>üåç 30 ans pour un futur durable</h1>
 <div class="subtitle">De 2025 √† 2055 - Des choix qui engagent l'avenir</div>
 
 <div class="scenario-container">
 <p><strong>Bienvenue dans cette exp√©rience immersive !</strong></p>
 <p>Tu vas vivre 30 ann√©es de d√©cisions cruciales pour notre plan√®te, confront√© √† des dilemmes moraux, √©conomiques et √©cologiques.</p>
 <p>Chaque choix aura des cons√©quences r√©elles sur l'environnement, l'√©conomie et la soci√©t√©.</p>
 <p>Pr√™t √† faire face aux d√©fis ?</p>
 </div>
 
 <button class="choice-btn" onclick="startGame()" style="text-align: center;">
 Commencer l'aventure
 </button>
 </div>

 <!-- √âcran de jeu principal -->
 <div id="game-screen" class="hidden">
 <div class="phase-indicator" id="phase-display">PARTIE 1 : Ta vie personnelle (2025-2040)</div>
 
 <div class="progress-container">
 <div class="progress-bar">
 <div class="progress-fill" id="progress-fill"></div>
 </div>
 </div>

 <div class="stats" id="stats-container">
 <div class="stat">
 <div>üå± √âmissions CO‚ÇÇ</div>
 <div class="stat-value co2-value" id="co2-value">8.0</div>
 <div>t/an</div>
 <div class="stat-bar">
 <div class="stat-fill co2-fill" id="co2-bar"></div>
 </div>
 </div>
 <div class="stat" id="economy-stat">
 <div>üí∞ √âconomie verte</div>
 <div class="stat-value economy-value" id="economy-value">50</div>
 <div>/100</div>
 <div class="stat-bar">
 <div class="stat-fill economy-fill" id="economy-bar"></div>
 </div>
 </div>
 <div class="stat" id="social-stat">
 <div>üë• Adh√©sion sociale</div>
 <div class="stat-value social-value" id="social-value">50</div>
 <div>/100</div>
 <div class="stat-bar">
 <div class="stat-fill social-fill" id="social-bar"></div>
 </div>
 </div>
 </div>

 <div class="scenario-container" id="scenario-container">
 <div class="year-display" id="year-display">Ann√©e: 2025</div>
 <div class="question-text" id="question-text"></div>
 
 <div class="choices" id="choices-container">
 <!-- Les choix seront g√©n√©r√©s ici -->
 </div>
 </div>
 </div>

 <!-- √âcran de transition -->
 <div id="transition-screen" class="hidden transition-screen">
 <h2 class="transition-title">üîÑ 2040 : Le Tournant D√©cisif</h2>
 <div class="transition-text" id="transition-text"></div>
 <button class="choice-btn" onclick="startPart2()" style="text-align: center;">
 Acc√©der aux responsabilit√©s nationales
 </button>
 </div>

 <!-- √âcran final -->
 <div id="final-screen" class="hidden final-screen">
 <h2 class="final-title" id="final-title">Bilan 2055</h2>
 <div class="final-message" id="final-message"></div>

 <!-- Nouvelles statistiques d√©taill√©es -->
 <div class="final-stats">
 <div class="final-stat">
 <div>üå± √âmissions CO‚ÇÇ</div>
 <div class="final-stat-value" id="final-co2-value">8.0</div>
 <div>tonnes/habitant/an</div>
 <div id="final-co2-comment"></div>
 </div>
 <div class="final-stat">
 <div>üí∞ √âconomie verte</div>
 <div class="final-stat-value" id="final-economy-value">50</div>
 <div>/100</div>
 <div id="final-economy-comment"></div>
 </div>
 <div class="final-stat">
 <div>üë• Adh√©sion sociale</div>
 <div class="final-stat-value" id="final-social-value">50</div>
 <div>/100</div>
 <div id="final-social-comment"></div>
 </div>
 </div>

 <!-- Analyse d√©taill√©e -->
 <div class="analysis-section">
 <div class="analysis-title">üìä Analyse de ton parcours</div>
 <div id="detailed-analysis"></div>
 </div>

 <!-- Conseils d'am√©lioration -->
 <div class="improvement-tips">
 <div class="tips-title">üöÄ Pour aller plus loin</div>
 <div id="improvement-tips"></div>
 </div>

 <button class="restart-btn" onclick="restartGame()">
 üîÅ Rejouer l'aventure
 </button>
 </div>
 </div>

 <script>
 // √âtat du jeu
 let gameState = {
 currentPart: 1,
 currentQuestion: 0,
 co2: 8.0,
 economy: 50,
 social: 50,
 profilePoints: { A: 0, B: 0, C: 0 },
 choicesHistory: [],
 politicalAllies: 5 // Nouvel indicateur pour les alli√©s politiques
 };

 // Questions de la Partie 1 (Vie personnelle) avec situations dramatiques
 const part1Questions = [
 {
 year: 2025,
 text: "Tu viens d'obtenir ton premier emploi √† Lyon. O√π d√©cides-tu de vivre ?",
 choices: [
 {
 text: "A. En centre-ville, dans un logement moderne et bien √©quip√©",
 effect: { co2: +1.2, economy: -8, social: +5 },
 profile: "A"
 },
 {
 text: "B. En colocation dans un appartement r√©nov√© √©co-responsable", 
 effect: { co2: -0.8, economy: +3, social: +10 },
 profile: "B"
 },
 {
 text: "C. En p√©riph√©rie, avec plus d'espace et un petit jardin",
 effect: { co2: +0.4, economy: -3, social: +8 },
 profile: "C"
 }
 ]
 },
 {
 year: 2027,
 text: "Ton meilleur ami, entrepreneur, te propose un contrat lucratif mais climaticide.",
 choices: [
 {
 text: "A. Accepter - l'amiti√© et les opportunit√©s √©conomiques d'abord",
 effect: { co2: +2.0, economy: +15, social: -10 },
 profile: "A"
 },
 {
 text: "B. Refuser poliment mais proposer des alternatives durables",
 effect: { co2: -0.5, economy: +5, social: +8 },
 profile: "B"
 },
 {
 text: "C. Refuser cat√©goriquement et d√©noncer les pratiques", 
 effect: { co2: -1.0, economy: -5, social: +15 },
 profile: "C"
 }
 ]
 },
 {
 year: 2029,
 text: "Comment te rends-tu au travail le plus souvent ?",
 choices: [
 {
 text: "A. En voiture personnelle, pratique et rapide",
 effect: { co2: +1.8, economy: -8, social: -5 },
 profile: "A"
 },
 {
 text: "B. En transports en commun",
 effect: { co2: -0.7, economy: +3, social: +6 },
 profile: "B"
 },
 {
 text: "C. En v√©lo ou √† pied", 
 effect: { co2: -1.2, economy: +5, social: +10 },
 profile: "C"
 }
 ]
 },
 {
 year: 2031, 
 text: "Ton salaire augmente, comment √©volue ton mode de vie ?",
 choices: [
 {
 text: "A. Tu profites : nouveaux appareils, repas livr√©s, sorties fr√©quentes",
 effect: { co2: +1.5, economy: -15, social: +4 },
 profile: "A"
 },
 {
 text: "B. Tu consommes local, tu cuisines plus souvent",
 effect: { co2: -0.6, economy: +5, social: +8 },
 profile: "B"
 },
 {
 text: "C. Tu r√©duis tes achats superflus pour privil√©gier la durabilit√©",
 effect: { co2: -1.1, economy: +12, social: +9 },
 profile: "C"
 }
 ]
 },
 {
 year: 2033,
 text: "Ton entreprise te propose de participer √† un projet de modernisation.",
 choices: [
 {
 text: "A. Tu privil√©gies la rentabilit√© et l'efficacit√©",
 effect: { co2: +0.9, economy: +15, social: -12 },
 profile: "A"
 },
 {
 text: "B. Tu proposes d'int√©grer des solutions √©cologiques et sociales", 
 effect: { co2: -1.2, economy: +5, social: +15 },
 profile: "B"
 },
 {
 text: "C. Tu cherches un compromis entre performances et impact positif",
 effect: { co2: -0.4, economy: +10, social: +10 },
 profile: "C"
 }
 ]
 },
 {
 year: 2035,
 text: "Tu d√©couvres que ton mentor politique est financ√© par les √©nergies fossiles.",
 choices: [
 {
 text: "A. Le d√©noncer publiquement",
 effect: { social: +20, economy: -5, politicalAllies: -2 },
 profile: "C"
 },
 {
 text: "B. L'affronter en priv√©", 
 effect: { social: +5, economy: -2, politicalAllies: -1 },
 profile: "B"
 },
 {
 text: "C. Fermer les yeux par loyaut√©",
 effect: { social: -10, economy: +5, politicalAllies: +1 },
 profile: "A"
 }
 ]
 },
 {
 year: 2037,
 text: "Tes revenus sont stables. Quelle priorit√© choisis-tu ?",
 choices: [
 {
 text: "A. Voyager et profiter au maximum de la vie",
 effect: { co2: +1.8, economy: -12, social: +4 },
 profile: "A"
 },
 {
 text: "B. Investir dans une maison √©conome et durable",
 effect: { co2: -1.4, economy: +8, social: +9 },
 profile: "B"
 },
 {
 text: "C. Donner de ton temps √† des associations locales",
 effect: { co2: -0.6, economy: +3, social: +18 },
 profile: "C"
 }
 ]
 },
 {
 year: 2039,
 text: "Face aux crises climatiques, comment adaptes-tu ton alimentation ?",
 choices: [
 {
 text: "A. Je garde mes habitudes, c'est trop contraignant de changer",
 effect: { co2: +0.8, economy: -2, social: -8 },
 profile: "A"
 },
 {
 text: "B. Je r√©duis ma consommation de viande progressivement", 
 effect: { co2: -1.1, economy: +6, social: +9 },
 profile: "B"
 },
 {
 text: "C. Je deviens v√©g√©tarien et privil√©gie les produits locaux", 
 effect: { co2: -1.7, economy: +10, social: +14 },
 profile: "C"
 }
 ]
 }
 ];

 // Questions de la Partie 2 (Vie politique) avec crises et dilemmes
 const part2Questions = [
 {
 year: 2041,
 text: "Tu int√®gres le gouvernement. Tu dois choisir entre sauver 1000 emplois ou fermer une usine polluante.",
 choices: [
 {
 text: "A. Sauver les emplois - l'√©conomie d'abord",
 effect: { co2: +1.5, economy: +20, social: -15 }
 },
 {
 text: "B. Fermer l'usine - la sant√© publique avant tout", 
 effect: { co2: -2.0, economy: -15, social: +10 }
 },
 {
 text: "C. Proposer un plan de reconversion progressif",
 effect: { co2: -0.8, economy: -5, social: +15 }
 }
 ]
 },
 {
 year: 2043,
 text: "Une manifestation bloque ton projet √©cologique, comment r√©agis-tu ?",
 choices: [
 {
 text: "A. Faire √©vacuer par la force - l'ordre public d'abord",
 effect: { social: -20, economy: +5, co2: +0.5 }
 },
 {
 text: "B. N√©gocier et adapter le projet", 
 effect: { social: +15, economy: -5, co2: -0.3 }
 },
 {
 text: "C. Annuler le projet pour apaiser les tensions",
 effect: { social: +5, economy: -10, co2: +1.0 }
 }
 ]
 },
 {
 year: 2045,
 text: "Tu d√©couvres une corruption dans ton parti (d√©tournement d'argent pour l'environnement).",
 choices: [
 {
 text: "A. √âtouffer l'affaire pour prot√©ger le parti",
 effect: { social: -25, economy: +10, politicalAllies: +3 }
 },
 {
 text: "B. Ouvrir une enqu√™te interne discr√®te", 
 effect: { social: -5, economy: -5, politicalAllies: -1 }
 },
 {
 text: "C. Porter l'affaire devant la justice",
 effect: { social: +20, economy: -15, politicalAllies: -5 }
 }
 ]
 },
 {
 year: 2047,
 text: "Une vague de chaleur tue 50 personnes dans ta r√©gion. La presse t'accuse d'inaction.",
 crisis: true,
 choices: [
 {
 text: "A. Rejeter la responsabilit√© sur les gouvernements pr√©c√©dents",
 effect: { social: -20, economy: -5, co2: +0.3 }
 },
 {
 text: "B. Reconna√Ætre les manquements et pr√©senter un plan d'urgence", 
 effect: { social: +10, economy: -10, co2: -0.5 }
 },
 {
 text: "C. Accuser les m√©dias de sensationnalisme",
 effect: { social: -30, economy: 0, co2: +0.2 }
 }
 ]
 },
 {
 year: 2049,
 text: "La France doit choisir sa strat√©gie √©nerg√©tique face √† la crise.",
 choices: [
 {
 text: "A. Relancer le nucl√©aire pour garantir l'ind√©pendance",
 effect: { co2: -1.8, economy: +12, social: -10 }
 },
 {
 text: "B. Miser sur les √©nergies renouvelables et la sobri√©t√©",
 effect: { co2: -2.4, economy: -6, social: +18 }
 },
 {
 text: "C. M√©langer les deux pour une transition progressive", 
 effect: { co2: -1.2, economy: +5, social: +10 }
 }
 ]
 },
 {
 year: 2051,
 text: "Des 'gilets jaunes' du climat bloquent ton minist√®re. Leurs revendications sont radicales.",
 crisis: true,
 choices: [
 {
 text: "A. Faire intervenir les forces de l'ordre",
 effect: { social: -25, economy: -10, co2: +0.5 }
 },
 {
 text: "B. Ouvrir le dialogue et int√©grer leurs propositions", 
 effect: { social: +20, economy: -15, co2: -1.0 }
 },
 {
 text: "C. Ignorer le mouvement et poursuivre sa politique",
 effect: { social: -15, economy: 0, co2: +0.3 }
 }
 ]
 },
 {
 year: 2053,
 text: "L'Europe discute d'un grand accord environnemental. Quelle position adoptes-tu ?",
 choices: [
 {
 text: "A. D√©fendre les int√©r√™ts fran√ßais avant tout",
 effect: { co2: +0.6, economy: +12, social: -20 }
 },
 {
 text: "B. Soutenir un accord europ√©en ambitieux",
 effect: { co2: -1.8, economy: -10, social: +22 }
 },
 {
 text: "C. Tenter un compromis r√©alisable",
 effect: { co2: -0.9, economy: +3, social: +12 }
 }
 ]
 },
 {
 year: 2055,
 text: "En fin de mandat, tu dois choisir une grande r√©forme symbolique.",
 choices: [
 {
 text: "A. Cr√©er un revenu vert pour r√©compenser les comportements durables",
 effect: { co2: -1.2, economy: -10, social: +30 }
 },
 {
 text: "B. Interdire progressivement les v√©hicules thermiques",
 effect: { co2: -2.8, economy: -20, social: -18 }
 },
 {
 text: "C. Rendre obligatoire l'√©ducation environnementale √† tous les niveaux",
 effect: { co2: -0.8, economy: +5, social: +25 }
 }
 ]
 }
 ];

 // Textes de transition
 const transitionTexts = {
 A: "Tes choix ont souvent privil√©gi√© le d√©veloppement √©conomique, parfois au d√©triment de l'environnement. Mais face √† l'urgence climatique, tu as d√©cid√© de changer de cap et de t'engager en politique pour concilier √©cologie et croissance.",
 B: "Tu as toujours cherch√© l'√©quilibre entre responsabilit√© √©cologique et r√©alisme √©conomique. Ton parcours mod√©r√© et pragmatique te donne aujourd'hui l'opportunit√© d'agir √† plus grande √©chelle.",
 C: "Ton engagement √©cologique sans concession t'a valu respect et admiration. Tes positions courageuses t'ont naturellement conduit vers les plus hautes responsabilit√©s pour transformer la soci√©t√©."
 };

 // FONCTIONS PRINCIPALES
 function startGame() {
 document.getElementById('intro-screen').classList.add('hidden');
 document.getElementById('game-screen').classList.remove('hidden');
 updateGame();
 }

 function updateGame() {
 const questions = gameState.currentPart === 1 ? part1Questions : part2Questions;
 
 if (gameState.currentQuestion >= questions.length) {
 if (gameState.currentPart === 1) {
 showTransition();
 } else {
 endGame();
 }
 return;
 }
 
 const question = questions[gameState.currentQuestion];
 
 // Mettre √† jour l'interface
 document.getElementById('phase-display').textContent = 
 gameState.currentPart === 1 ? "PARTIE 1 : Ta vie personnelle (2025-2040)" : "PARTIE 2 : Ton engagement politique (2041-2055)";
 
 document.getElementById('year-display').textContent = `Ann√©e: ${question.year}`;
 document.getElementById('question-text').textContent = question.text;
 
 // Style sp√©cial pour les crises
 const scenarioContainer = document.getElementById('scenario-container');
 if (question.crisis) {
 scenarioContainer.className = 'scenario-container crisis-scenario';
 document.getElementById('year-display').className = 'year-display crisis-year';
 } else {
 scenarioContainer.className = 'scenario-container';
 document.getElementById('year-display').className = 'year-display';
 }
 
 // Barre de progression
 const totalQuestions = questions.length;
 const progress = ((gameState.currentQuestion) / totalQuestions) * 100;
 document.getElementById('progress-fill').style.width = `${progress}%`;
 
 // G√©rer l'affichage des indicateurs
 const statsContainer = document.getElementById('stats-container');
 const economyStat = document.getElementById('economy-stat');
 const socialStat = document.getElementById('social-stat');
 
 if (gameState.currentPart === 1) {
 statsContainer.classList.add('visible');
 economyStat.style.display = 'none';
 socialStat.style.display = 'none';
 } else {
 statsContainer.classList.add('visible');
 economyStat.style.display = 'block';
 socialStat.style.display = 'block';
 }
 
 // Mettre √† jour les valeurs avec formatage
 document.getElementById('co2-value').textContent = gameState.co2.toFixed(1);
 document.getElementById('economy-value').textContent = Math.round(gameState.economy);
 document.getElementById('social-value').textContent = Math.round(gameState.social);
 
 // Mettre √† jour les barres de progression des jauges
 updateStatBars();
 
 // G√©n√©rer les choix
 const choicesContainer = document.getElementById('choices-container');
 choicesContainer.innerHTML = '';
 
 question.choices.forEach((choice, index) => {
 const button = document.createElement('button');
 button.className = question.crisis ? 'choice-btn crisis-btn' : 'choice-btn';
 button.textContent = choice.text;
 button.onclick = () => makeChoice(index);
 choicesContainer.appendChild(button);
 });
 }

 function updateStatBars() {
 // CO2 : 2t (excellent) √† 15t (tr√®s mauvais)
 const co2Percent = Math.max(0, Math.min(100, ((gameState.co2 - 2) / (15 - 2)) * 100));
 document.getElementById('co2-bar').style.width = `${co2Percent}%`;
 
 // √âconomie et Social : 0 √† 100
 document.getElementById('economy-bar').style.width = `${gameState.economy}%`;
 document.getElementById('social-bar').style.width = `${gameState.social}%`;
 }

 function makeChoice(choiceIndex) {
 const questions = gameState.currentPart === 1 ? part1Questions : part2Questions;
 const question = questions[gameState.currentQuestion];
 const choice = question.choices[choiceIndex];
 
 // Appliquer les effets
 gameState.co2 += choice.effect.co2 || 0;
 gameState.economy += choice.effect.economy || 0;
 gameState.social += choice.effect.social || 0;
 gameState.politicalAllies += choice.effect.politicalAllies || 0;
 
 // Limiter les valeurs de mani√®re r√©aliste
 gameState.co2 = Math.max(2.0, Math.min(15.0, gameState.co2));
 gameState.economy = Math.max(0, Math.min(100, gameState.economy));
 gameState.social = Math.max(0, Math.min(100, gameState.social));
 gameState.politicalAllies = Math.max(0, Math.min(10, gameState.politicalAllies));
 
 // Enregistrer le profil pour la Partie 1
 if (gameState.currentPart === 1 && choice.profile) {
 gameState.profilePoints[choice.profile]++;
 }
 
 gameState.currentQuestion++;
 updateGame();
 }

 function showTransition() {
 document.getElementById('game-screen').classList.add('hidden');
 document.getElementById('transition-screen').classList.remove('hidden');
 
 // D√©terminer le profil
 let profile = "B";
 if (gameState.profilePoints.A > gameState.profilePoints.B && gameState.profilePoints.A > gameState.profilePoints.C) {
 profile = "A";
 } else if (gameState.profilePoints.C > gameState.profilePoints.A && gameState.profilePoints.C > gameState.profilePoints.B) {
 profile = "C";
 }
 
 document.getElementById('transition-text').textContent = transitionTexts[profile];
 }

 function startPart2() {
 gameState.currentPart = 2;
 gameState.currentQuestion = 0;
 document.getElementById('transition-screen').classList.add('hidden');
 document.getElementById('game-screen').classList.remove('hidden');
 updateGame();
 }

 function endGame() {
 document.getElementById('game-screen').classList.add('hidden');
 document.getElementById('final-screen').classList.remove('hidden');
 
 // D√©terminer le r√©sultat final avec crit√®res r√©alistes
 let worldType = "transition";
 let title = "üåø Monde en transition";
 let message = "";
 
 if (gameState.co2 <= 4.0 && gameState.economy >= 70 && gameState.social >= 75) {
 worldType = "equilibre";
 title = "üåç Monde en √©quilibre";
 message = "F√©licitations ! Gr√¢ce √† ton courage et ta vision, la France a r√©ussi sa transformation √©cologique tout en pr√©servant la coh√©sion sociale et l'√©conomie. Tes choix difficiles ont pay√© : la neutralit√© carbone est atteinte, les emplois verts prosp√®rent, et la soci√©t√© est unie face aux d√©fis. Tu as montr√© qu'une autre voie √©tait possible.";
 } else if (gameState.co2 >= 8.0 || gameState.economy <= 30 || gameState.social <= 30) {
 worldType = "tension";
 title = "üî• Monde en tension";
 message = "Les crises se sont encha√Æn√©es et tes d√©cisions n'ont pas suffi √† inverser la tendance. Entre pressions √©conomiques, conflits sociaux et urgences climatiques, le syst√®me a craqu√©. Malgr√© tes efforts sinc√®res, les transformations n√©cessaires demandaient plus de courage politique et de coh√©rence. La France reste divis√©e et vuln√©rable face aux chocs √† venir.";
 } else {
 worldType = "transition";
 title = "üåø Monde en transition";
 message = "Tu as pos√© des bases solides mais incompl√®tes. La France a r√©duit ses √©missions et d√©velopp√© des fili√®res vertes, mais les in√©galit√©s persistent et l'acceptation sociale des transformations reste fragile. Les prochaines ann√©es seront d√©cisives pour consolider cette transition et √©viter le point de non-retour.";
 }
 
 document.getElementById('final-screen').className = `final-screen world-${worldType}`;
 document.getElementById('final-title').textContent = title;
 document.getElementById('final-message').textContent = message;
 
 // Mettre √† jour les statistiques d√©taill√©es
 updateFinalStats();
 
 // G√©n√©rer l'analyse d√©taill√©e
 generateDetailedAnalysis();
 
 // G√©n√©rer les conseils d'am√©lioration
 generateImprovementTips();
 }

 function updateFinalStats() {
 // Mettre √† jour les valeurs finales
 document.getElementById('final-co2-value').textContent = gameState.co2.toFixed(1);
 document.getElementById('final-economy-value').textContent = Math.round(gameState.economy);
 document.getElementById('final-social-value').textContent = Math.round(gameState.social);
 
 // Ajouter des commentaires selon les performances
 let co2Comment = "";
 let economyComment = "";
 let socialComment = "";
 
 // Commentaires CO2
 if (gameState.co2 <= 4.0) {
 co2Comment = "‚úÖ Objectif neutralit√© carbone atteint !";
 document.getElementById('final-co2-value').className = "final-stat-value co2-good";
 } else if (gameState.co2 <= 6.0) {
 co2Comment = "üü° Proche des objectifs climatiques";
 document.getElementById('final-co2-value').className = "final-stat-value co2-medium";
 } else {
 co2Comment = "üî¥ D√©passement des limites soutenables";
 document.getElementById('final-co2-value').className = "final-stat-value co2-bad";
 }
 
 // Commentaires √âconomie
 if (gameState.economy >= 70) {
 economyComment = "‚úÖ √âconomie verte florissante";
 document.getElementById('final-economy-value').className = "final-stat-value economy-good";
 } else if (gameState.economy >= 40) {
 economyComment = "üü° Transition √©conomique en cours";
 document.getElementById('final-economy-value').className = "final-stat-value economy-medium";
 } else {
 economyComment = "üî¥ Retard dans l'innovation verte";
 document.getElementById('final-economy-value').className = "final-stat-value economy-bad";
 }
 
 // Commentaires Social
 if (gameState.social >= 70) {
 socialComment = "‚úÖ Coh√©sion sociale exemplaire";
 document.getElementById('final-social-value').className = "final-stat-value social-good";
 } else if (gameState.social >= 40) {
 socialComment = "üü° Acceptation sociale mod√©r√©e";
 document.getElementById('final-social-value').className = "final-stat-value social-medium";
 } else {
 socialComment = "üî¥ Fractures sociales importantes";
 document.getElementById('final-social-value').className = "final-stat-value social-bad";
 }
 
 document.getElementById('final-co2-comment').textContent = co2Comment;
 document.getElementById('final-economy-comment').textContent = economyComment;
 document.getElementById('final-social-comment').textContent = socialComment;
 }

 function generateDetailedAnalysis() {
 let analysis = "";
 
 // Analyser le profil dominant
 let dominantProfile = "B";
 if (gameState.profilePoints.A > gameState.profilePoints.B && gameState.profilePoints.A > gameState.profilePoints.C) {
 dominantProfile = "A";
 analysis += "<p><strong>Ton profil : Pragmatique √©conomique</strong><br>";
 analysis += "Tes choix ont souvent privil√©gi√© la croissance et la stabilit√©, m√™me face aux urgences √©cologiques. Tu as appris √† concilier √©cologie et r√©alisme √©conomique, parfois au prix de compromis difficiles.</p>";
 } else if (gameState.profilePoints.C > gameState.profilePoints.A && gameState.profilePoints.C > gameState.profilePoints.B) {
 dominantProfile = "C";
 analysis += "<p><strong>Ton profil : Visionnaire √©cologique</strong><br>";
 analysis += "Tu n'as jamais transig√© sur tes principes environnementaux, m√™me dans l'adversit√©. Ton courage face aux lobbies et aux pressions a inspir√© beaucoup de monde, mais t'a aussi isol√© √† certains moments.</p>";
 } else {
 analysis += "<p><strong>Ton profil : √âquilibr√© et r√©aliste</strong><br>";
 analysis += "Tu as constamment cherch√© le juste milieu entre exigences √©cologiques, imp√©ratifs √©conomiques et r√©alit√© sociale. Ton approche pragmatique a permis des avanc√©es significatives sans rupture brutale.</p>";
 }
 
 // Points forts
 analysis += "<p><strong>Points forts :</strong><br>";
 let hasStrengths = false;
 
 if (gameState.co2 <= 4.0) {
 analysis += "‚Ä¢ Ma√Ætrise exceptionnelle des √©missions carbone<br>";
 hasStrengths = true;
 }
 if (gameState.economy >= 70) {
 analysis += "‚Ä¢ D√©veloppement √©conomique vert remarquable<br>";
 hasStrengths = true;
 }
 if (gameState.social >= 70) {
 analysis += "‚Ä¢ Leadership social reconnu<br>";
 hasStrengths = true;
 }
 if (gameState.co2 > 4.0 && gameState.co2 <= 6.0) {
 analysis += "‚Ä¢ Transition √©nerg√©tique bien engag√©e<br>";
 hasStrengths = true;
 }
 if (gameState.economy >= 50 && gameState.economy < 70) {
 analysis += "‚Ä¢ √âconomie en transition positive<br>";
 hasStrengths = true;
 }
 if (gameState.politicalAllies >= 7) {
 analysis += "‚Ä¢ R√©seau d'alliances politique solide<br>";
 hasStrengths = true;
 }
 
 if (!hasStrengths) {
 analysis += "‚Ä¢ R√©silience face aux crises successives<br>";
 }
 
 analysis += "</p>";
 
 // D√©fis √† surmonter
 analysis += "<p><strong>D√©fis √† surmonter :</strong><br>";
 let hasChallenges = false;
 
 if (gameState.co2 > 6.0) {
 analysis += "‚Ä¢ Acc√©l√©ration n√©cessaire de la d√©carbonation<br>";
 hasChallenges = true;
 }
 if (gameState.economy < 40) {
 analysis += "‚Ä¢ Investissements verts √† renforcer<br>";
 hasChallenges = true;
 }
 if (gameState.social < 40) {
 analysis += "‚Ä¢ R√©conciliation sociale √† mener<br>";
 hasChallenges = true;
 }
 if (gameState.co2 > 8.0) {
 analysis += "‚Ä¢ Urgence climatique critique<br>";
 hasChallenges = true;
 }
 if (gameState.economy < 60 && gameState.economy >= 40) {
 analysis += "‚Ä¢ Acc√©l√©ration n√©cessaire des investissements verts<br>";
 hasChallenges = true;
 }
 if (gameState.social < 60 && gameState.social >= 40) {
 analysis += "‚Ä¢ Reconstruction du dialogue social<br>";
 hasChallenges = true;
 }
 if (gameState.politicalAllies < 3) {
 analysis += "‚Ä¢ Fragilit√© politique<br>";
 hasChallenges = true;
 }
 
 // Si aucun d√©fi sp√©cifique n'a √©t√© identifi√©, donner un d√©fi g√©n√©rique
 if (!hasChallenges) {
 analysis += "‚Ä¢ Maintenir les efforts sur le long terme pour consolider les acquis<br>";
 }
 
 analysis += "</p>";
 
 document.getElementById('detailed-analysis').innerHTML = analysis;
 }

 function generateImprovementTips() {
 let tips = "";
 
 tips += "<div class='tip-item'>Renforcer les partenariats public-priv√© pour l'innovation verte</div>";
 
 if (gameState.co2 > 6.0) {
 tips += "<div class='tip-item'>Acc√©l√©rer le plan de r√©novation √©nerg√©tique des b√¢timents</div>";
 }
 
 if (gameState.economy < 60) {
 tips += "<div class='tip-item'>D√©velopper les fonds d'investissement d√©di√©s √† la transition</div>";
 }
 
 if (gameState.social < 60) {
 tips += "<div class='tip-item'>Mettre en place des conventions citoyennes pour le climat</div>";
 }
 
 if (gameState.politicalAllies < 5) {
 tips += "<div class='tip-item'>Construire des coalitions politiques √©largies</div>";
 }
 
 tips += "<div class='tip-item'>Int√©grer syst√©matiquement l'√©ducation environnementale dans les programmes</div>";
 tips += "<div class='tip-item'>D√©velopper les outils de d√©mocratie participative</div>";
 
 document.getElementById('improvement-tips').innerHTML = tips;
 }

 function restartGame() {
 gameState = {
 currentPart: 1,
 currentQuestion: 0,
 co2: 8.0,
 economy: 50,
 social: 50,
 profilePoints: { A: 0, B: 0, C: 0 },
 choicesHistory: [],
 politicalAllies: 5
 };
 
 document.getElementById('final-screen').classList.add('hidden');
 document.getElementById('intro-screen').classList.remove('hidden');
 }
 </script>
</body>
</html>